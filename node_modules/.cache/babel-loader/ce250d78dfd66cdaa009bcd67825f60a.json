{"ast":null,"code":"import _regeneratorRuntime from\"/Users/mako/Downloads/todo_supabase/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"/Users/mako/Downloads/todo_supabase/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/mako/Downloads/todo_supabase/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from'react';import{IconButton,Input,useToast,AlertDialog,AlertDialogOverlay,AlertDialogContent,AlertDialogHeader,AlertDialogBody,AlertDialogFooter,Button}from'@chakra-ui/react';import supabase from'../supabase';import{FiEdit}from'react-icons/fi';import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";export default function EditTask(_ref){var id=_ref.id;var _useState=useState(''),_useState2=_slicedToArray(_useState,2),text=_useState2[0],setText=_useState2[1];var _useState3=useState(false),_useState4=_slicedToArray(_useState3,2),loading=_useState4[0],setLoading=_useState4[1];var _useState5=useState(false),_useState6=_slicedToArray(_useState5,2),isConfirmationOpen=_useState6[0],setIsConfirmationOpen=_useState6[1];var cancelRef=React.useRef();var toast=useToast();function handleSubmit(){return _handleSubmit.apply(this,arguments);}function _handleSubmit(){_handleSubmit=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var _yield$supabase$from$,data,error;return _regeneratorRuntime().wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:setIsConfirmationOpen(false);setLoading(true);_context.next=4;return supabase.from('todos').update({text:text}).eq('id',id).select();case 4:_yield$supabase$from$=_context.sent;data=_yield$supabase$from$.data;error=_yield$supabase$from$.error;setLoading(false);setText('');toast({title:error||'Task updated!',position:'top',status:error?'error':'success',duration:2000,isClosable:true});case 10:case\"end\":return _context.stop();}}},_callee);}));return _handleSubmit.apply(this,arguments);}return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(IconButton,{isRound:true,icon:/*#__PURE__*/_jsx(FiEdit,{}),onClick:function onClick(){return setIsConfirmationOpen(true);},isLoading:loading}),/*#__PURE__*/_jsx(AlertDialog,{isOpen:isConfirmationOpen,leastDestructiveRef:cancelRef,onClose:function onClose(){return setIsConfirmationOpen(false);},children:/*#__PURE__*/_jsx(AlertDialogOverlay,{children:/*#__PURE__*/_jsxs(AlertDialogContent,{children:[/*#__PURE__*/_jsx(AlertDialogHeader,{fontSize:\"lg\",fontWeight:\"bold\",children:\"Edit Task\"}),/*#__PURE__*/_jsx(AlertDialogBody,{children:/*#__PURE__*/_jsx(Input,{value:text,onChange:function onChange(e){return setText(e.target.value);},placeholder:\"Edit task\"})}),/*#__PURE__*/_jsxs(AlertDialogFooter,{children:[/*#__PURE__*/_jsx(Button,{ref:cancelRef,onClick:function onClick(){return setIsConfirmationOpen(false);},children:\"Cancel\"}),/*#__PURE__*/_jsx(Button,{colorScheme:\"teal\",ml:3,onClick:handleSubmit,children:\"Save\"})]})]})})})]});}","map":{"version":3,"names":["React","useState","IconButton","Input","useToast","AlertDialog","AlertDialogOverlay","AlertDialogContent","AlertDialogHeader","AlertDialogBody","AlertDialogFooter","Button","supabase","FiEdit","jsx","_jsx","jsxs","_jsxs","Fragment","_Fragment","EditTask","_ref","id","_useState","_useState2","_slicedToArray","text","setText","_useState3","_useState4","loading","setLoading","_useState5","_useState6","isConfirmationOpen","setIsConfirmationOpen","cancelRef","useRef","toast","handleSubmit","_handleSubmit","apply","arguments","_asyncToGenerator","_regeneratorRuntime","mark","_callee","_yield$supabase$from$","data","error","wrap","_callee$","_context","prev","next","from","update","eq","select","sent","title","position","status","duration","isClosable","stop","children","isRound","icon","onClick","isLoading","isOpen","leastDestructiveRef","onClose","fontSize","fontWeight","value","onChange","e","target","placeholder","ref","colorScheme","ml"],"sources":["/Users/mako/Downloads/todo_supabase/src/components/EditTask.js"],"sourcesContent":["import React, { useState } from 'react';\nimport { IconButton, Input, useToast, AlertDialog, AlertDialogOverlay, AlertDialogContent, AlertDialogHeader, AlertDialogBody, AlertDialogFooter, Button } from '@chakra-ui/react';\nimport supabase from '../supabase';\nimport { FiEdit } from 'react-icons/fi';\n\nexport default function EditTask({ id }) {\n  const [text, setText] = useState('');\n  const [loading, setLoading] = useState(false);\n  const [isConfirmationOpen, setIsConfirmationOpen] = useState(false);\n  const cancelRef = React.useRef();\n  const toast = useToast();\n\n  async function handleSubmit() {\n    setIsConfirmationOpen(false);\n\n    setLoading(true);\n    const { data, error } = await supabase.from('todos').update({ text }).eq('id', id).select();\n\n    setLoading(false);\n    setText('');\n\n    toast({\n      title: error || 'Task updated!',\n      position: 'top',\n      status: error ? 'error' : 'success',\n      duration: 2000,\n      isClosable: true,\n    });\n  }\n\n \n\n  return (\n    <>\n      <IconButton\n        isRound\n        icon={<FiEdit />}\n        onClick={() => setIsConfirmationOpen(true)}\n        isLoading={loading}\n      />\n\n      <AlertDialog\n        isOpen={isConfirmationOpen}\n        leastDestructiveRef={cancelRef}\n        onClose={() => setIsConfirmationOpen(false)}\n      >\n        <AlertDialogOverlay>\n          <AlertDialogContent>\n            <AlertDialogHeader fontSize=\"lg\" fontWeight=\"bold\">\n              Edit Task\n            </AlertDialogHeader>\n\n            <AlertDialogBody>\n              <Input\n                value={text}\n                onChange={(e) => setText(e.target.value)}\n                placeholder=\"Edit task\"\n              />\n            </AlertDialogBody>\n\n            <AlertDialogFooter>\n              <Button ref={cancelRef} onClick={() => setIsConfirmationOpen(false)}>\n                Cancel\n              </Button>\n              <Button colorScheme=\"teal\" ml={3} onClick={handleSubmit}>\n                Save\n              </Button>\n            </AlertDialogFooter>\n          </AlertDialogContent>\n        </AlertDialogOverlay>\n      </AlertDialog>\n    </>\n  );\n}\n"],"mappings":"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"},"metadata":{},"sourceType":"module"}